# 财务数据处理质量验证清单

## 处理前检查

### 数据准备验证

- [ ] 数据文件已放置在正确目录
- [ ] 文件编码正确（UTF-8或GBK）
- [ ] 配置文件路径正确
- [ ] 工作目录权限足够

### 配置文件验证

- [ ] YAML语法正确
- [ ] 数据源定义完整
- [ ] 处理规则明确
- [ ] 输出规范清晰

## 处理中监控

### AI理解确认

- [ ] AI正确识别了数据源文件
- [ ] AI理解了时间处理规则
- [ ] AI明确了交易筛选标准
- [ ] AI知道输出格式要求

### 处理过程检查

- [ ] 数据清理步骤正确执行
- [ ] 交易筛选逻辑正确应用
- [ ] 重复记录检测有效
- [ ] 分类规则合理应用

## 处理后验证

### 关键质量检查 (必须通过)

#### 时间格式验证 ⭐⭐⭐

- [ ] 微信数据保持精确时间戳格式 (YYYY-MM-DD HH:mm:ss)
- [ ] 银行数据仅保留日期格式 (YYYY-MM-DD)
- [ ] **绝对禁止：银行数据不应出现00:00:00等虚假时间**
- [ ] 时间字段无空值或错误格式

#### 数据真实性验证 ⭐⭐⭐

- [ ] 无编造或推测的信息
- [ ] 金额数据完整准确
- [ ] 商户名称未被过度修改
- [ ] 支付方式信息真实

#### 交易类型验证 ⭐⭐⭐

- [ ] 完全排除还款类交易
- [ ] 完全排除转账类交易
- [ ] 完全排除红包类交易
- [ ] 只保留真实消费记录

#### 数据来源验证 ⭐⭐

- [ ] 每条记录都有"数据来源"字段
- [ ] 来源标记准确（"微信账单"/"招行账单"）
- [ ] 来源与实际数据源一致
- [ ] 无遗漏的来源标记

### 一般质量检查

#### 数据完整性

- [ ] 记录总数合理（无异常丢失）
- [ ] 金额字段无异常值
- [ ] 商户名称字段无异常空值
- [ ] 必填字段完整

#### 分类准确性

- [ ] 消费类型分类合理
- [ ] 大部分记录有明确分类
- [ ] 分类关键词匹配正确
- [ ] 特殊商户分类准确

#### 格式规范性

- [ ] CSV文件格式正确
- [ ] 字符编码无乱码
- [ ] 列名标准化
- [ ] 数据排序正确（按时间倒序）

### 数据统计验证

#### 数量分布检查

- [ ] 微信账单数据占比合理
- [ ] 银行账单数据占比合理
- [ ] 总记录数在预期范围内
- [ ] 各消费类型分布合理

#### 金额范围检查

- [ ] 金额分布合理
- [ ] 大额交易（>5000元）已标注
- [ ] 异常小额交易（<0.1元）已排除
- [ ] 金额总和在预期范围内

#### 时间范围检查

- [ ] 时间跨度覆盖所有源文件
- [ ] 最早记录日期合理
- [ ] 最晚记录日期合理
- [ ] 时间序列连续性正常

## 错误类型识别

### 严重错误（必须修正）

- **虚假时间**：银行数据添加了不存在的时间信息
- **数据泄露**：包含非消费类交易（还款、转账等）
- **来源混淆**：数据来源标记错误或缺失
- **格式破坏**：输出文件格式不正确

### 警告错误（建议修正）

- **分类不准**：消费类型分类明显错误
- **商户重复**：同一商户多种表示未统一
- **异常金额**：存在异常大额或小额交易
- **编码问题**：存在乱码或特殊字符

### 提示信息（可接受）

- **未分类**：少量记录无法自动分类
- **商户简化**：商户名称适度简化处理
- **时间精度**：不同数据源时间精度差异

## 修正指令模板

### 严重错误修正

```text
发现严重错误：[具体错误描述]
请按照配置文件重新处理，确保：
1. 银行数据仅保留日期，不添加时间
2. 完全排除还款、转账等非消费记录
3. 每条记录标明正确的数据来源
```

### 一般问题修正

```text
发现以下问题：[问题列表]
请优化处理：
1. [具体优化要求]
2. [具体优化要求]
重新生成完整消费记录文件。
```

## 验证通过标准

处理结果必须满足：

- [x] 通过所有关键质量检查
- [x] 严重错误数量 = 0
- [x] 警告错误数量 < 5%
- [x] 数据完整性 > 95%
- [x] 分类准确率 > 90%

## 最终确认清单

- [ ] 输出文件 `完整消费记录.csv` 存在
- [ ] 文件大小合理（非空且不异常大）
- [ ] 能用Excel/其他工具正常打开
- [ ] 数据内容符合预期
- [ ] 中间临时文件已清理
- [ ] 处理完成报告清晰
